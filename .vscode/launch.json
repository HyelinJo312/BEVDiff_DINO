{

    "version": "0.2.0",
    "configurations": [
        {
            "name": "Train_bevdiffuser_pretrain", 
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/BEVFormer/tools/train_pretrain.py",
            "console": "integratedTerminal",
            "args": [
                "${workspaceFolder}/BEVFormer/projects/configs/bevdiffuser/bevformer_tiny_pretrain_dino.py", 
                // "--launcher", "None",
                "--deterministic",
                "--work_dir", "${workspaceFolder}/results_pretrain_debug_v2",
                // "--load_from", "${workspaceFolder}/BEVFormer/ckpts/bevformer_tiny_epoch_24.pth",
                // "--resume_from", "None",
                "--report_to", "tensorboard",
                "--denoise_loss_weight", "10.0",
                "--unet_checkpoint", "${workspaceFolder}/BEVFormer/ckpts/checkpoint-50000",
                "--bev_checkpoint", "None"

            ],

            "env": {
                "PYTHONPATH": "${workspaceFolder}/BEVFormer:${env:PYTHONPATH}",
                "CUDA_VISIBLE_DEVICES": "0",
                "RANK": "0",
                "LOCAL_RANK": "0",
                "WORLD_SIZE": "1",
                "MASTER_ADDR": "127.0.0.1",
                "MASTER_PORT": "29500",
                "PYTORCH_CUDA_ALLOC_CONF": "max_split_size_mb:256"
            }
            
        },

                {
            "name": "Eval_bevdiffuser_pretrain", 
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/BEVFormer/tools/test_pretrain.py",
            "console": "integratedTerminal",
            "args": [
                "${workspaceFolder}/BEVFormer/projects/configs/bevdiffuser/layout_tiny_pretrain_debug.py", 
                "${workspaceFolder}/results_pretrain_debug/epoch_1.pth",
                "--eval", "bbox",
                "--show-dir", "${workspaceFolder}/BEVFormer/pretrain_debug_output",
                "--launcher", "pytorch",

            ],

            "env": {
                "PYTHONPATH": "${workspaceFolder}",
                "CUDA_VISIBLE_DEVICES": "4, 5",
                "RANK": "0",
                "LOCAL_RANK": "0",
                "WORLD_SIZE": "1",
                "MASTER_ADDR": "127.0.0.1",
                "MASTER_PORT": "29500",


            }
            
        },
    ]
}